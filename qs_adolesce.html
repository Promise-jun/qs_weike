<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>情说微课-情说成长</title>
	<meta name = "viewport" content = "width = device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable = 0" />
	<!-- head 中 -->
	<link rel="stylesheet" type="text/css" href="./css/weui.min.css">
	<link rel="stylesheet" type="text/css" href="./css/jquery-weui.min.css">
	<link rel="stylesheet" type="text/css" href="./css/dropload.css">
	<link rel="stylesheet" type="text/css" href="./css/qs_weike.css">
	<script type="text/javascript">
	    (function (doc, win) {
	      	var docEl = doc.documentElement,
	     	resizeEvt = 'orientationchange' in window
	        	? 'orientationchange'
	        	: 'resize',
	      	recalc = function () {
	        	var clientWidth = docEl.clientWidth
	        	if (!clientWidth) return
	       		docEl.style.fontSize = clientWidth / 18.75 + 'px'
	      	}
      		if (!doc.addEventListener) return
      		win.addEventListener(resizeEvt, recalc, false)
      		doc.addEventListener('DOMContentLoaded', recalc, false)
	    })(document, window)
	 </script>
</head>
<body>
	<div class="top_fixed">
		<div class="weui-flex top_tab">
		  	<div class="weui-flex__item active_tab">全部</div>
		  	<div class="weui-flex__item">成长课堂</div>
		  	<div class="weui-flex__item">成长音频</div>
		  	<div class="line_box">
		  		<div class="line"></div>
		  	</div>
		</div>
	</div>
	<div class="container qs_adolesce">

		<div class="margin_num"></div>
		<!-- 全部 -->
		<div class="page_content" style="display: block;">
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');">
					<div class="play_icon"></div>
				</div>
				<div class="title">原来你也在这里</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="price">¥ 18.9</div>
			</div>
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');"></div>
				<div class="title">心理咨询师到底是什么人？</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="free">免费</div>
			</div>
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');">
					<div class="play_icon"></div>
				</div>
				<div class="title">原来你也在这里</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="price">¥ 18.9</div>
			</div>
		</div>
		<!-- 成长课程 -->
		<div class="page_content">
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');"></div>
				<div class="title">心理咨询师到底是什么人？</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="free">免费</div>
			</div>
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');"></div>
				<div class="title">心理咨询师到底是什么人？</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="free">免费</div>
			</div>
		</div>
		<!-- 成长音频 -->
		<div class="page_content">
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');">
					<div class="play_icon"></div>
				</div>
				<div class="title">原来你也在这里</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="price">¥ 18.9</div>
			</div>
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');">
					<div class="play_icon"></div>
				</div>
				<div class="title">原来你也在这里</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="price">¥ 18.9</div>
			</div>
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');">
					<div class="play_icon"></div>
				</div>
				<div class="title">原来你也在这里</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="price">¥ 18.9</div>
			</div>
			<div class="adolesce_list">
				<div class="adolesce_binner" style="background-image: url('./images/bg.jpg');">
					<div class="play_icon"></div>
				</div>
				<div class="title">原来你也在这里</div>
				<div class="data">
					<span>李四川</span>
					<span>220</span>
					<span>220</span>
				</div>
				<div class="price">¥ 18.9</div>
			</div>
		</div>
	</div>

	<!-- body 最后 -->
	<script type="text/javascript" src="./js/jquery-2.1.4.js"></script>
	<script type="text/javascript" src="./js/jquery-weui.min.js"></script>
	<script type="text/javascript" src="./js/dropload.min.js"></script>
	<script type="text/javascript">
		$(function() {
			// tab切换
			var len = $('.top_tab .weui-flex__item').length,
				leftNum = 12; //初始距离左边的百分比
				$lineObj = $('.line_box .line');
			$('.top_tab .weui-flex__item').on('click', function() {
				var index = $(this).index();
				functionList.changeLine(index, len, leftNum, $lineObj);
				$(this).addClass('active_tab').siblings().removeClass('active_tab');
				$('.qs_adolesce .page_content').hide();
				$('.qs_adolesce .page_content').eq(index).fadeIn(300);
			})
		})

		var functionList = {
			// tab切换改变line位置
			changeLine: function(index, len, leftNum, $lineObj) {
				$lineObj.animate({
					left: ((100 / len) * index + leftNum).toFixed(2) + '%'
				}, 200);
			}
		}

		// dropload
		var counter = 0;
	    // 每页展示4个
	    var num = 4;
	    var pageStart = 0,pageEnd = 0;
	    
	    $('.container').dropload({
	        scrollArea : window,
	        loadUpFn : function(me){
	            /*$.ajax({
	                type: 'GET',
	                url: 'json/update.json',
	                dataType: 'json',
	                success: function(data){
	                    var result = '';
	                    for(var i = 0; i < data.lists.length; i++){
	                        result +=   '<a class="item opacity" href="'+data.lists[i].link+'">'
	                                        +'<img src="'+data.lists[i].pic+'" alt="">'
	                                        +'<h3>'+data.lists[i].title+'</h3>'
	                                        +'<span class="date">'+data.lists[i].date+'</span>'
	                                    +'</a>';
	                    }
	                    // 为了测试，延迟1秒加载
	                    setTimeout(function(){
	                        $('.lists').html(result);
	                        // 每次数据加载完，必须重置
	                        me.resetload();
	                        // 重置索引值，重新拼接more.json数据
	                        counter = 0;
	                        // 解锁
	                        me.unlock();
	                        me.noData(false);
	                    },1000);
	                },
	                error: function(xhr, type){
	                    alert('Ajax error!');
	                    // 即使加载出错，也得重置
	                    me.resetload();
	                }
	            });*/
	            // console.log($('.weui-navbar .weui-bar__item--on').index())
	            console.log(111)
	            // 为了测试，延迟1秒加载
                setTimeout(function(){
                    // 每次数据加载完，必须重置
                    me.resetload();
                    // 解锁
                    me.unlock();
                    me.noData(false);
                },1000);
	        },
	        loadDownFn : function(me){
	            /*$.ajax({
	                type: 'GET',
	                url: 'json/more.json',
	                dataType: 'json',
	                success: function(data){
	                    var result = '';
	                    counter++;
	                    pageEnd = num * counter;
	                    pageStart = pageEnd - num;

	                    for(var i = pageStart; i < pageEnd; i++){
	                        result +=   '<a class="item opacity" href="'+data.lists[i].link+'">'
	                                        +'<img src="'+data.lists[i].pic+'" alt="">'
	                                        +'<h3>'+data.lists[i].title+'</h3>'
	                                        +'<span class="date">'+data.lists[i].date+'</span>'
	                                    +'</a>';
	                        if((i + 1) >= data.lists.length){
	                            // 锁定
	                            me.lock();
	                            // 无数据
	                            me.noData();
	                            break;
	                        }
	                    }
	                    // 为了测试，延迟1秒加载
	                    setTimeout(function(){
	                        $('.lists').append(result);
	                        // 每次数据加载完，必须重置
	                        me.resetload();
	                    },1000);
	                },
	                error: function(xhr, type){
	                    alert('Ajax error!');
	                    // 即使加载出错，也得重置
	                    me.resetload();
	                }
	            });*/
	            // console.log($('.weui-navbar .weui-bar__item--on').index())
	            console.log(222)
	            // 为了测试，延迟1秒加载
                setTimeout(function(){
                	// 锁定
                    me.lock();
                    // 无数据
                    me.noData();
                    // 每次数据加载完，必须重置
                    me.resetload();
                },1000);
	        },
	        threshold : 50
	    });
	</script>
</body>
</html>