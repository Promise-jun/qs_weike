<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>情说微课-情说杂志</title>
	<meta name = "viewport" content = "width = device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable = 0" />
	<!-- head 中 -->
	<link rel="stylesheet" type="text/css" href="./css/weui.min.css">
	<link rel="stylesheet" type="text/css" href="./css/jquery-weui.min.css">
	<link rel="stylesheet" type="text/css" href="./css/dropload.css">
	<link rel="stylesheet" type="text/css" href="./css/qs_weike.css">
	<link rel="stylesheet" type="text/css" href="./css/swiper.min.css">
	<script type="text/javascript">
	    (function (doc, win) {
	      	var docEl = doc.documentElement,
	     	resizeEvt = 'orientationchange' in window
	        	? 'orientationchange'
	        	: 'resize',
	      	recalc = function () {
	        	var clientWidth = docEl.clientWidth
	        	if (!clientWidth) return
	       		docEl.style.fontSize = clientWidth / 18.75 + 'px'
	      	}
      		if (!doc.addEventListener) return
      		win.addEventListener(resizeEvt, recalc, false)
      		doc.addEventListener('DOMContentLoaded', recalc, false)
	    })(document, window)
	 </script>
</head>
<body>
	<div class="top_fixed">
		<div class="weui-flex top_tab">
		  	<div class="weui-flex__item active_tab">成长杂志</div>
		  	<div class="weui-flex__item">情感杂志</div>
		  	<div class="weui-flex__item">亲子杂志</div>
		  	<div class="line_box">
		  		<div class="line"></div>
		  	</div>
		</div>

		<div class="margin_num"></div>

		<!-- Swiper -->
	    <div class="swiper-container label_swiper">
	        <div class="swiper-wrapper">
	            <div class="swiper-slide label_active">
	            	<span>推荐</span>
	            </div>
	            <div class="swiper-slide">
	            	<span>生活常识</span>
	            </div>
	            <div class="swiper-slide">
	            	<span>成长教育</span>
	            </div>
	            <div class="swiper-slide">
	            	<span>思维逻辑</span>
	            </div>
	            <div class="swiper-slide">
	            	<span>职场生涯</span>
	            </div>
	            <div class="swiper-slide">
	            	<span>性心理</span>
	            </div>
	        </div>
	    </div>
	</div>
	<div class="container qs_magazine">

		<!-- 全部 -->
		<div class="page_content weui-cells" style="display: block;">
			<div class="weui-cell">
			    <div class="weui-cell__bd">
			      	<p class="title">从节后开工的状态，就能看到你的未来从节后开工的状态，就能看到你的未来</p>
			      	<p class="author">主讲：李小冉</p>
			      	<p class="data">
			      		<label>专题</label>
			      		<span>30293浏览</span>
			      	</p>
			    </div>
			    <div class="weui-cell__ft"><img src="images/timg-head.jpg"></div>
			</div>
			<div class="weui-cell">
			    <div class="weui-cell__bd">
			      	<p class="title">从节后开工的状态，就能看到你的未来从节后开工的状态，就能看到你的未来</p>
			      	<p class="author">主讲：李小冉</p>
			      	<p class="data">
			      		<label>专题</label>
			      		<span>30293浏览</span>
			      	</p>
			    </div>
			    <div class="weui-cell__ft"><img src="images/timg-head.jpg"></div>
			</div>
		</div>
		<!-- 成长课程 -->
		<div class="page_content weui-cells">
			<div class="weui-cell">
			    <div class="weui-cell__bd">
			      	<p class="title">从节后开工的状态，就能看到你的未来从节后开工的状态，就能看到你的未来</p>
			      	<p class="author">主讲：李小冉</p>
			      	<p class="data">
			      		<label>专题</label>
			      		<span>30293浏览</span>
			      	</p>
			    </div>
			    <div class="weui-cell__ft"><img src="images/timg-head.jpg"></div>
			</div>
			<div class="weui-cell">
			    <div class="weui-cell__bd">
			      	<p class="title">从节后开工的状态，就能看到你的未来从节后开工的状态，就能看到你的未来</p>
			      	<p class="author">主讲：李小冉</p>
			      	<p class="data">
			      		<label>专题</label>
			      		<span>30293浏览</span>
			      	</p>
			    </div>
			    <div class="weui-cell__ft"><img src="images/timg-head.jpg"></div>
			</div>
			<div class="weui-cell">
			    <div class="weui-cell__bd">
			      	<p class="title">从节后开工的状态，就能看到你的未来从节后开工的状态，就能看到你的未来</p>
			      	<p class="author">主讲：李小冉</p>
			      	<p class="data">
			      		<label>专题</label>
			      		<span>30293浏览</span>
			      	</p>
			    </div>
			    <div class="weui-cell__ft"><img src="images/timg-head.jpg"></div>
			</div>
		</div>
		<!-- 成长音频 -->
		<div class="page_content weui-cells">
			<div class="weui-cell">
			    <div class="weui-cell__bd">
			      	<p class="title">从节后开工的状态，就能看到你的未来从节后开工的状态，就能看到你的未来</p>
			      	<p class="author">主讲：李小冉</p>
			      	<p class="data">
			      		<label>专题</label>
			      		<span>30293浏览</span>
			      	</p>
			    </div>
			    <div class="weui-cell__ft"><img src="images/timg-head.jpg"></div>
			</div>
		</div>
	</div>

	<!-- popup -->
	<div id="magazine" class="weui-popup__container">
	  	<div class="weui-popup__overlay"></div>
	  	<div class="weui-popup__modal">
	    	<div class="popup_top">
	    		<a href="javascript:;" class="close close-popup"></a>
	    		<a href="javascript:;" class="share"></a>
	    	</div>
	    	<div class="popup_content">
				<div class="weui-cell weui-cells">
				    <div class="weui-cell__bd">
				      	<p class="title">从节后开工的状态，就能看到你的未来</p>
				      	<p class="data">
				      		<label>专题</label>
				      		<span>30293阅读</span>
				      	</p>
				    </div>
				</div>

				<div class="weui-cells author_info">
					<a class="weui-cell weui-cell_access" href="javascript:;">
						<div class="weui-cell__hd"><img src="images/timg-head.jpg"></div>
					    <div class="weui-cell__bd">
					      	<p class="author">作者：咨询师杨蕾</p>
					      	<p class="info">国家注册二级心理咨询师</p>
					    </div>
					    <div class="weui-cell__ft">
							查看相关
					    </div>
					</a>
				</div>

				<div class="magazine_cont">
					<p>人的自信到底从何而来？以及如何培养自己的自信？高度的自信，从高度的自律而来。自律又是什么？自律就是自己管理自己，自己约束自己。这是一个很重要的能力。先学会克制自己，用严格的日程表来控制生活，才能在这种自律中不断磨练出自信。自信也代表着对事情的控制能力，连最基本的时间都控制不了，谈何自信？</p>
					<p>除了自律以外，自黑的能力也相当重要。世界之大，什么鸟都有。等你哪一天稍微做出点成绩，很多认识或不认识的人便在背后，唧唧歪歪的议论是非。从最开始的吐槽，到断章取义的论断甚至无趣的黑你。</p>
					<p>自黑就是自己嘲笑自己，自己黑色幽默自己。自黑是一种沟通方式，也是一种境界，更是一种另类的修养。自黑不是等到有人说你时才出现，而是从头到尾都需要有。</p>
				</div>
	    	</div>
	  	</div>
	</div>

	<!-- body 最后 -->
	<script type="text/javascript" src="./js/jquery-2.1.4.js"></script>
	<script type="text/javascript" src="./js/jquery-weui.min.js"></script>
	<script type="text/javascript" src="./js/dropload.min.js"></script>
	<script type="text/javascript" src="./js/swiper.min.js"></script>
	<script type="text/javascript">
		$(function() {
			// tab切换
			var len = $('.top_tab .weui-flex__item').length,
				leftNum = 12; //初始距离左边的百分比
				$lineObj = $('.line_box .line');
			$('.top_tab .weui-flex__item').on('click', function() {
				var index = $(this).index();
				functionList.changeLine(index, len, leftNum, $lineObj);
				$(this).addClass('active_tab').siblings().removeClass('active_tab');
				$('.qs_magazine .page_content').hide();
				$('.qs_magazine .page_content').eq(index).fadeIn(200);
			})

			// swiper
			$('.label_swiper .swiper-slide').each(function() {
		    	$(this).css({
		    		width: $(this).find('span').width() + 38
		    	})
		    })
			var labelSwiper = new Swiper('.label_swiper', {
		        slidesPerView: 'auto',
		        slideToClickedSlide: true
		    });
		    $('.label_swiper .swiper-slide').on('click', function() {
		    	$(this).addClass('label_active').siblings().removeClass('label_active');
		    })

		    // 点击杂志打开详情
		    $(document).on('click', '.qs_magazine .weui-cell', function() {
		    	$("#magazine").popup();
		    	$('.popup_content').css({
		    		height: $(window).innerHeight() - 44
		    	})
		    })
		})

		var functionList = {
			// tab切换改变line位置
			changeLine: function(index, len, leftNum, $lineObj) {
				$lineObj.animate({
					left: ((100 / len) * index + leftNum).toFixed(2) + '%'
				}, 200);
			}
		}

		// dropload
		var counter = 0;
	    // 每页展示4个
	    var num = 4;
	    var pageStart = 0,pageEnd = 0;
	    
	    $('.container').dropload({
	        scrollArea : window,
	        loadUpFn : function(me){
	            /*$.ajax({
	                type: 'GET',
	                url: 'json/update.json',
	                dataType: 'json',
	                success: function(data){
	                    var result = '';
	                    for(var i = 0; i < data.lists.length; i++){
	                        result +=   '<a class="item opacity" href="'+data.lists[i].link+'">'
	                                        +'<img src="'+data.lists[i].pic+'" alt="">'
	                                        +'<h3>'+data.lists[i].title+'</h3>'
	                                        +'<span class="date">'+data.lists[i].date+'</span>'
	                                    +'</a>';
	                    }
	                    // 为了测试，延迟1秒加载
	                    setTimeout(function(){
	                        $('.lists').html(result);
	                        // 每次数据加载完，必须重置
	                        me.resetload();
	                        // 重置索引值，重新拼接more.json数据
	                        counter = 0;
	                        // 解锁
	                        me.unlock();
	                        me.noData(false);
	                    },1000);
	                },
	                error: function(xhr, type){
	                    alert('Ajax error!');
	                    // 即使加载出错，也得重置
	                    me.resetload();
	                }
	            });*/
	            // console.log($('.weui-navbar .weui-bar__item--on').index())
	            console.log(111)
	            // 为了测试，延迟1秒加载
                setTimeout(function(){
                    // 每次数据加载完，必须重置
                    me.resetload();
                    // 解锁
                    me.unlock();
                    me.noData(false);
                },1000);
	        },
	        loadDownFn : function(me){
	            /*$.ajax({
	                type: 'GET',
	                url: 'json/more.json',
	                dataType: 'json',
	                success: function(data){
	                    var result = '';
	                    counter++;
	                    pageEnd = num * counter;
	                    pageStart = pageEnd - num;

	                    for(var i = pageStart; i < pageEnd; i++){
	                        result +=   '<a class="item opacity" href="'+data.lists[i].link+'">'
	                                        +'<img src="'+data.lists[i].pic+'" alt="">'
	                                        +'<h3>'+data.lists[i].title+'</h3>'
	                                        +'<span class="date">'+data.lists[i].date+'</span>'
	                                    +'</a>';
	                        if((i + 1) >= data.lists.length){
	                            // 锁定
	                            me.lock();
	                            // 无数据
	                            me.noData();
	                            break;
	                        }
	                    }
	                    // 为了测试，延迟1秒加载
	                    setTimeout(function(){
	                        $('.lists').append(result);
	                        // 每次数据加载完，必须重置
	                        me.resetload();
	                    },1000);
	                },
	                error: function(xhr, type){
	                    alert('Ajax error!');
	                    // 即使加载出错，也得重置
	                    me.resetload();
	                }
	            });*/
	            // console.log($('.weui-navbar .weui-bar__item--on').index())
	            console.log(222)
	            // 为了测试，延迟1秒加载
                setTimeout(function(){
                	// 锁定
                    me.lock();
                    // 无数据
                    me.noData();
                    // 每次数据加载完，必须重置
                    me.resetload();
                },1000);
	        },
	        threshold : 50
	    });
	</script>
</body>
</html>