<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>情说微课-音频专栏</title>
	<meta name = "viewport" content = "width = device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable = 0" />
	<!-- head 中 -->
	<link rel="stylesheet" type="text/css" href="./css/weui.min.css">
	<link rel="stylesheet" type="text/css" href="./css/jquery-weui.min.css">
	<link rel="stylesheet" type="text/css" href="./css/qs_weike.css">
	<script type="text/javascript">
	    (function (doc, win) {
	      	var docEl = doc.documentElement,
	     	resizeEvt = 'orientationchange' in window
	        	? 'orientationchange'
	        	: 'resize',
	      	recalc = function () {
	        	var clientWidth = docEl.clientWidth
	        	if (!clientWidth) return
	       		docEl.style.fontSize = clientWidth / 18.75 + 'px'
	      	}
      		if (!doc.addEventListener) return
      		win.addEventListener(resizeEvt, recalc, false)
      		doc.addEventListener('DOMContentLoaded', recalc, false)
	    })(document, window)
	 </script>
</head>
<body>
	<div class="top_fixed">
		<div class="weui-flex top_box">
		  	<div class="weui-flex__item">
		  		<a href="javascript:;" class="back"></a>
		  		<a href="javascript:;" class="share"></a>
		  	</div>
		</div>
	</div>
	<div class="container audio_column">
		<div class="binner"><img src="images/bg.jpg"></div>
		<div class="weui-cells">
			<div class="weui-cell audio_info">
			    <div class="weui-cell__bd">
			      	<p class="title">如何让孩子变得更有教养</p>
			      	<p class="tool">12节品质课程，让你的孩子变得有教养</p>
			    </div>
			    <div class="weui-cell__ft">共10期</div>
			</div>
		</div>

		<div class="margin_num"></div>

		<div class="weui-flex top_tab">
		  	<div class="weui-flex__item active_tab">详情</div>
		  	<div class="weui-flex__item">课程</div>
		  	<div class="line_box">
		  		<div class="line"></div>
		  	</div>
		</div>
		<div class="audio_box">
			<div class="audio_detail">
				<h3>课程简介</h3>
				<p>如何让孩子变得更有教养的内容简单介绍如何让孩子变得更有教养的内容简单介绍如何让</p>
				<p>养的内容简单介绍如何让孩子变得更有教养的内容简单介绍如何让孩子变得更有教养的内容简单介绍如何让孩子变得更</p>
				<h3>用户评价（20）</h3>
				<div class="audio_appraise">
					<div class="audio_li">
						<div class="weui-cell">
						    <div class="weui-cell__hd"><img src="images/timg-head.jpg"></div>
						    <div class="weui-cell__bd">
						      	<p class="name">Menty</p>
						      	<p class="time">2018-04-01 13:00</p>
						    </div>
						</div>
						<div class="appraise_text">
							感情上遇到一些问题，没有办法自我消化了，所以来到网上找心理咨询师，很幸运地选了梦立方，更幸运的是客服帮我匹配了石杨晓雪老师
						</div>
					</div>
					<div class="audio_li">
						<div class="weui-cell">
						    <div class="weui-cell__hd"><img src="images/timg-head.jpg"></div>
						    <div class="weui-cell__bd">
						      	<p class="name">Menty</p>
						      	<p class="time">2018-04-01 13:00</p>
						    </div>
						</div>
						<div class="appraise_text">
							感情上遇到一些问题，没有办法自我消化了，所以来到网上找心理咨询师，很幸运地选了梦立方，更幸运的是客服帮我匹配了石杨晓雪老师
						</div>
					</div>
				</div>
				<a class="weui-cell weui-cell_access all_evaluation" href="audio_appraise.html">
				    <div class="weui-cell__bd">
				      	<p>查看全部用户评价</p>
				    </div>
				    <div class="weui-cell__ft"></div>
				</a>
			</div>
			<div class="weui-cells audio_list" style="display: none;">
				<a href="javascript:;" class="weui-cell">
				    <div class="weui-cell__hd">
				    	<div class="shade"></div>
				    	<img src="images/timg-head.jpg">
				    </div>
				    <div class="weui-cell__bd">
				      	<p class="title">自我中心不等于自私</p>
				      	<p class="play_num">播放量:3245次</p>
				      	<p class="audio_data">
				      		<span>214</span>
				      		<span>32:00</span>
				      	</p>
				    </div>
				    <div class="weui-cell__ft">08-14</div>
				</a>
				<a href="javascript:;" class="weui-cell">
				    <div class="weui-cell__hd">
				    	<div class="shade"></div>
				    	<img src="images/timg-head.jpg">
				    </div>
				    <div class="weui-cell__bd">
				      	<p class="title">自我中心不等于自私</p>
				      	<p class="play_num">播放量:3245次</p>
				      	<p class="audio_data">
				      		<span>214</span>
				      		<span>32:00</span>
				      	</p>
				    </div>
				    <div class="weui-cell__ft">08-14</div>
				</a>
				<a href="javascript:;" class="weui-cell">
				    <div class="weui-cell__hd">
				    	<div class="shade"></div>
				    	<img src="images/timg-head.jpg">
				    </div>
				    <div class="weui-cell__bd">
				      	<p class="title">自我中心不等于自私</p>
				      	<p class="play_num">播放量:3245次</p>
				      	<p class="audio_data">
				      		<span>214</span>
				      		<span>32:00</span>
				      	</p>
				    </div>
				    <div class="weui-cell__ft">08-14</div>
				</a>
			</div>
		</div>

		<div class="margin_num" style="height: 59px;"></div>
	</div>
	<div class="foot_fixed">
		<!--  未购买 -->
		<div>
			<a href="javascript:functionList.footBtnFn();">¥89.9订阅</a>
		</div>
		<!-- 购买了 -->
		<!-- <div>
			<a href="javascript:;" class="download"><span>批量下载</span></a>
		</div> -->
	</div>

	<!-- body 最后 -->
	<script type="text/javascript" src="./js/jquery-2.1.4.js"></script>
	<script type="text/javascript" src="./js/jquery-weui.min.js"></script>
	<script type="text/javascript">
		$(function() {
			var tabTop = $('.top_tab').offset().top,
				topBoxH = $('.top_box').innerHeight(),
				isBack = $('.top_box').find('a').hasClass('back'),
				isShare = $('.top_box').find('a').hasClass('share');
			$(window).scroll(function() {
				functionList.scroll_opacity($(this).scrollTop(), $('.top_box'), isBack, isShare);
				if ($(this).scrollTop() >= (tabTop - topBoxH)) {
					$('.top_tab').css({
						position: 'fixed',
						top: topBoxH
					})
					$('.audio_box').css({
						marginTop: 44 + 'px'
					})
				} else {
					$('.top_tab').css({
						position: 'relative',
						top: 0
					})
					$('.audio_box').css({
						marginTop: 0 + 'px'
					})
				}
			})


			// tab切换
			var len = $('.top_tab .weui-flex__item').length,
				leftNum = 21; //初始距离左边的百分比
				$lineObj = $('.line_box .line');
			$('.top_tab .weui-flex__item').on('click', function() {
				var index = $(this).index();
				functionList.changeLine(index, len, leftNum, $lineObj);
				$(this).addClass('active_tab').siblings().removeClass('active_tab');
				$('.audio_box>div').hide();
				$('.audio_box>div').eq(index).fadeIn(200);
				$('.foot_fixed>div').eq(index).show().siblings('div').hide();
			})
		})

		var functionList = {
			// 点击底部按钮
			footBtnFn: function() {
				alert(1)
			},
			// tab切换改变line位置
			changeLine: function(index, len, leftNum, $lineObj) {
				$lineObj.animate({
					left: ((100 / len) * index + leftNum).toFixed(2) + '%'
				}, 200);
			},
			// 滚动改变透明度
			scroll_opacity: function(scrollNum, $obj, isBack, isShare) {
				if (scrollNum >= 150) {
					$obj.addClass('opacity_active');
					if (isBack) {
						$obj.find('.back').css({
							background: 'url("../images/icon_top_back@2x.png") no-repeat center',
							backgroundSize: 'contain'
						})
					}
					if (isShare) {
						$obj.find('.share').css({
							background: 'url("../images/icon_top_share@2x.png") no-repeat center',
							backgroundSize: 'contain'
						})
					}
				} else {
					$obj.removeClass('opacity_active');
					if (isBack) {
						$obj.find('.back').css({
							background: 'url("../images/back.png") no-repeat center',
							backgroundSize: 'contain'
						})
					}
					if (isShare) {
						$obj.find('.share').css({
							background: 'url("../images/icon_frequency_share@2x.png") no-repeat center',
							backgroundSize: 'contain'
						})
					}
				}
			}
		}
	</script>
</body>
</html>